CREATE TABLE users (
	user_id SERIAL PRIMARY KEY,
	user_name varchar(50) NOT NULL,
	password varchar(100) NOT NULL,
	user_type integer NOT NULL,
	user_status integer DEFAULT 1 -- '1' for active users and '0' for deleted users
);

CREATE TABLE teacher_subjects (
	id SERIAL PRIMARY KEY,
	user_id integer NOT NULL,
	subject_name varchar(20) NOT NULL,
	form integer NOT NULL,
	stream varchar(1) NOT NULL,
	year integer NOT NULL,
	FOREIGN KEY (user_id) REFERENCES users(user_id) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE class_teachers (
	id SERIAL PRIMARY KEY,
	user_id integer NOT NULL,
	form integer NOT NULL,
	stream varchar(1) NOT NULL,
	year integer NOT NULL,
	FOREIGN KEY (user_id) REFERENCES users(user_id) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE students (
	reg_no SERIAL PRIMARY KEY,
	name varchar(100) NOT NULL,
	dob DATE NOT NULL,
	sex varchar(1) DEFAULT 'M',
	form integer NOT NULL,
	stream varchar(1) NOT NULL,
	year integer NOT NULL,
	status integer DEFAULT 1
);

CREATE TABLE exams (
	id SERIAL PRIMARY KEY,
	reg_no integer NOT NULL,
	subject integer NOT NULL, --english, kiswahili, maths
	term integer NOT NULL,
	form integer NOT NULL,
	year integer NOT NULL,
	opener integer,
	midterm integer,
	endterm integer,
	FOREIGN KEY (reg_no) REFERENCES students(reg_no) ON UPDATE CASCADE ON DELETE CASCADE
);

INSERT INTO users (user_name, password, user_type) VALUES
('Admin', '123', 0),
('Lara Moses', '123', 1),
('Kaia Salazar', '123', 2),
('Natalya Carpenter', '123', 3);

 
INSERT INTO students (name, dob, sex, form, stream, year) VALUES
('Kailee Ellison', '2004-03-25', 'F', 1, 'A', 2019),
('Clark Becker', '2004-11-13', 'M', 1, 'A', 2019),
('Lydia Baxter', '2004-05-08', 'F', 1, 'B', 2019),
('Ryker Sherman', '2004-10-12', 'M', 1, 'C', 2019),
('Alison Mendez', '2004-08-26', 'F', 1, 'C', 2019),
('Melvin Ford', '2001-07-22', 'M', 4, 'A', 2019),
('Michaela Blackwell', '2001-09-14', 'F', 4, 'A', 2019),
('Michael Gonzales', '2001-12-24', 'M', 4, 'B', 2019),
('Jazlyn Nash', '2001-08-16', 'F', 4, 'C', 2019),
('Jonah Ford', '2001-01-23', 'M', 4, 'C', 2019);

INSERT INTO exams (reg_no, subject, term, form, year, opener, midterm, endterm) VALUES
(1, 1, 1, 1, 2019, 80, 78, 79),
(2, 1, 1, 1, 2019, 86, 61, 76),
(3, 1, 1, 1, 2019, 53, 92, 50),
(4, 1, 1, 1, 2019, 79, 93, 55),
(5, 1, 1, 1, 2019, 68, 72, 69),
(1, 2, 1, 1, 2019, 56, 67, 54), 
(2, 2, 1, 1, 2019, 91, 63, 88),
(3, 2, 1, 1, 2019, 91, 69, 96),
(4, 2, 1, 1, 2019, 82, 68, 94),
(5, 2, 1, 1, 2019, 90, 74, 65),
(1, 3, 1, 1, 2019, 40, 90, 34),
(2, 3, 1, 1, 2019, 60, 56, 76),
(3, 3, 1, 1, 2019, 83, 73, 98),
(4, 3, 1, 1, 2019, 96, 71, 91),
(5, 3, 1, 1, 2019, 72, 53, 74),
(1, 4, 1, 1, 2019, 59, 96, 73),
(2, 4, 1, 1, 2019, 86, 60, 54),
(3, 4, 1, 1, 2019, 68, 90, 57),
(4, 4, 1, 1, 2019, 53, 57, 87),
(5, 4, 1, 1, 2019, 78, 75, 82),
(1, 5, 1, 1, 2019, 84, 51, 83),
(2, 5, 1, 1, 2019, 93, 98, 72),
(3, 5, 1, 1, 2019, 76, 89, 80),
(4, 5, 1, 1, 2019, 92, 94, 89),
(5, 5, 1, 1, 2019, 59, 99, 86),
(1, 6, 1, 1, 2019, 59, 56, 99),
(2, 6, 1, 1, 2019, 78, 76, 92),
(3, 6, 1, 1, 2019, 60, 54, 76),
(4, 6, 1, 1, 2019, 71, 64, 92),
(5, 6, 1, 1, 2019, 78, 68, 52),
(1, 7, 1, 1, 2019, 70, 97, 68),
(2, 7, 1, 1, 2019, 83, 97, 57),
(3, 7, 1, 1, 2019, 58, 87, 96),
(4, 7, 1, 1, 2019, 59, 63, 58),
(5, 7, 1, 1, 2019, 58, 86, 94),
(1, 8, 1, 1, 2019, 98, 81, 56),
(2, 8, 1, 1, 2019, 82, 54, 72),
(3, 8, 1, 1, 2019, 61, 70, 97),
(4, 8, 1, 1, 2019, 54, 90, 94),
(5, 8, 1, 1, 2019, 66, 88, 95),
(1, 9, 1, 1, 2019, 55, 82, 84),
(2, 9, 1, 1, 2019, 69, 53, 87),
(3, 9, 1, 1, 2019, 89, 55, 65),
(4, 9, 1, 1, 2019, 67, 78, 85),
(5, 9, 1, 1, 2019, 65, 84, 60),
(1, 10, 1, 1, 2019, 79, 76, 94),
(2, 11, 1, 1, 2019, 78, 78, 61),
(3, 10, 1, 1, 2019, 99, 57, 80),
(4, 10, 1, 1, 2019, 71, 68, 77),
(5, 11, 1, 1, 2019, 60, 97, 99),
(1, 12, 1, 1, 2019, 90, 96, 65),
(2, 12, 1, 1, 2019, 61, 55, 75),
(3, 11, 1, 1, 2019, 54, 74, 79),
(4, 11, 1, 1, 2019, 75, 77, 71),
(5, 12, 1, 1, 2019, 70, 55, 72),
(1, 13, 1, 1, 2019, 60, 54, 80),
(2, 14, 1, 1, 2019, 88, 59, 82),
(3, 13, 1, 1, 2019, 52, 51, 67),
(4, 14, 1, 1, 2019, 92, 63, 53),
(5, 13, 1, 1, 2019, 76, 79, 59),
(6, 1, 1, 4, 2019, 61, 69, 83),
(7, 1, 1, 4, 2019, 65, 62, 68),
(8, 1, 1, 4, 2019, 83, 50, 60),
(9, 1, 1, 4, 2019, 81, 98, 92),
(10, 1, 1, 4, 2019, 85, 51, 58),
(6, 2, 1, 4, 2019, 92, 59, 66),
(7, 2, 1, 4, 2019, 89, 50, 62),
(8, 2, 1, 4, 2019, 79, 91, 59),
(9, 2, 1, 4, 2019, 54, 87, 99),
(10, 2, 1, 4, 2019, 74, 74, 61),
(6, 3, 1, 4, 2019, 69, 52, 87),
(7, 3, 1, 4, 2019, 93, 94, 92),
(8, 3, 1, 4, 2019, 90, 68, 74),
(9, 3, 1, 4, 2019, 84, 58, 62),
(10, 3, 1, 4, 2019, 72, 82, 83),
(6, 4, 1, 4, 2019, 99, 65, 68),
(7, 4, 1, 4, 2019, 95, 52, 84),
(8, 4, 1, 4, 2019, 59, 99, 54),
(9, 4, 1, 4, 2019, 70, 63, 58),
(10, 4, 1, 4, 2019, 56, 69,	58),
(6, 5, 1, 4, 2019, 97, 52, 55),
(7, 5, 1, 4, 2019, 50, 58, 94),
(8, 5, 1, 4, 2019, 95, 73, 57),
(9, 6, 1, 4, 2019, 89, 75, 60),
(10, 6, 1, 4, 2019, 87, 88, 81),
(6, 6, 1, 4, 2019, 72, 89, 99),
(7, 6, 1, 4, 2019, 84, 84, 64),
(8, 7, 1, 4, 2019, 68, 52, 65),
(9, 7, 1, 4, 2019, 80, 59, 71),
(10, 7, 1, 4, 2019, 85, 75, 80),
(6, 7, 1, 4, 2019, 97, 78, 70),
(7, 8, 1, 4, 2019, 89, 88, 92),
(8, 9, 1, 4, 2019, 76, 55, 98),
(9, 8, 1, 4, 2019, 54, 94, 93),
(10, 9, 1, 4, 2019, 65, 83, 89),
(6, 9, 1, 4, 2019, 69, 61, 66),
(7, 12, 1, 4, 2019, 61, 98, 77),
(8, 11, 1, 4, 2019, 76, 61, 68),
(9, 12, 1, 4, 2019, 81, 51, 50),
(10, 10, 1, 4, 2019, 62, 77, 92);